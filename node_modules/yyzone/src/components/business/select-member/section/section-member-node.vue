<template>
    <div class="section-member-node">
        <TreeNode
            height="auto"
            :showExpand="false"
            :showExpandIcon="false"
            :checked="checked"
            @handleChecked="handleChecked">
            <template slot="content">
                <div class="section-member-node-content">
                    <Avatar 
                        size="32px"
                        fontSize="12px"
                        :name="data.userName || data.name"
                        :memberId="data.memberId"
                        :path="data.avatar"/>
                    <div class="section-member-node-info">
                        <div class="section-member-node-name">
                            {{data.userName || data.name}}
                            <span 
                                v-if="data.security"
                                :class="`section-member-node-security ${data.security || 'COMMON'}`">
                                · {{security[data.security || 'COMMON'].text}}
                            </span>
                        </div>
                        <div class="section-member-node-dept">{{data.deptName}}</div>
                    </div>
                </div>
            </template>
        </TreeNode>
    </div>
</template>
<script>
    import Avatar from '../../../base/avatar/'
    import Node from '../mixins/node'
    export default {
        name: 'YYMemberNode',
        mixins: [Node],
        components: {
            Avatar
        },
        inject: ['root'],
        props: {
            data: {
                type: Object,
                default () {
                    return {}
                }
            },
            parent: {
                type: Object
            }
        },
        data() {
            return {
                security: {
					COMMON: {
						text: '一般'
					},
					CORE: {
						text: '核心'
					},
					IMPORTANT: {
						text: '重要'
					}
				}
            }
        },
        computed: {
            checked() {
                const data = this.root.selected.member['m' + (this.root.isUseYhtUserId ? this.data.yhtUserId : this.data.memberId)] || null
                this.data.checked = !!data // 重置当前选择状态
                return !!data
            }
        }
    }
</script>


