<template>
    <div :class="prefixCls">
        <div :class="prefixCls + '-head'">
            <CheckboxGroup 
                v-model="langGroup"
                @on-change="handleChange">
                <Checkbox 
                    v-for="(item, key) in inputTypes"
                    :label="key"
                    :disabled="key === lang"
                    :key="key">
                    <span>{{item.label}}</span>
                </Checkbox>
            </CheckboxGroup>
        </div>
        <div :class="prefixCls + '-body'">
            <Form :label-width="60">
                <FormItem
                    v-for="(item, key) in inputTypes" 
                    v-show="item.show"
                    :key="key"
                    :type="type"
                    :label="item.label" >
                    <Input 
                        v-model="value[key]" 
                        :type="type"
                        :clearable="clearable" 
                        :maxlength="maxlength"
                        :placeholder="item.placeholder"/>
                </FormItem>
            </Form>
        </div>
        <div :class="prefixCls + '-foot'">
            <Button
                style="margin-right: 4px"
                size="small" 
                type="default" 
                @click="handleCancel">
                {{t('cancel')}}
            </Button>
            <Button 
                size="small" 
                type="primary" 
                @click="handleOk">
                {{t('ok')}}
            </Button>
        </div>
    </div>
</template>
<script>
    import CheckboxGroup from '../checkbox/checkbox-group'
    import Checkbox from '../checkbox/checkbox'
    import Button from '../button'
    import Form from '../form/form'
    import FormItem from '../form/form-item'
    import Input from '../input/'
    import Locale from '../../../mixins/locale'

    const prefixCls = 'yy-input-multilang-drop'
    export default {
        mixins: [Locale],
        components: {
            Checkbox,
            CheckboxGroup,
            Button,
            Form,
            FormItem,
            Input
        },
        props: {
            value: {
                type: Object
            },
            type: {
                type: String,
                default: 'text'
            },
            lang: {
                type: String,
            },
            clearable: {
                type: Boolean,
                default: false
            },
            maxlength: {
                type: Number
            }
        },
        data() {
            const inputTypes = {
                zhs: {
                    show: true,
                    label: '简体中文',
                    placeholder: '请输入内容'
                },
                zht: {
                    show: true,
                    label: '繁體中文',
                    placeholder: '請輸入內容'
                },
                en: {
                    show: true,
                    label: 'EN/英文',
                    placeholder: 'Please enter the content'
                }
            }
            return {
                prefixCls: prefixCls,
                langGroup: ['zhs', 'zht', 'en'],
                inputTypes: inputTypes,
            }
        },
        methods: {
            handleChange(value) {
                const inputTypesKey = Object.keys(this.inputTypes)
                inputTypesKey.forEach((item) => {
                    this.inputTypes[item].show = value.indexOf(item) != -1
                })
            },
            handleCancel() {
                this.$emit('on-cancel')
            },
            handleOk() {
                this.$emit('on-ok')
            }
        }
    }
</script>
